<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Closures</title>

</head>
<body>

	<div>
		<button>button  1 </button>
        <button>button  2</button>
        <button>button  3</button>
        <button>button  4</button>
		
	</div>

	<script>
	
window.onload = function (){

	this.a = 'a of window';


	var Me = {

			a : ' a of Me'
	}

	var He = {

			a : 'a of He',

	}


	function getA(a,b,c){

		alert(this.a);

	}



	getA.apply(window,[1,2,3]);





	return;


var drama = function(opts){

		this.title = opts.title;
		this.author = opts.author;

		this.actor = opts.actor;
		this.mood = opts.mood;


}

drama.BAD_MOOD = 0;
drama.BETTER_MOOD = 1;

	drama.prototype.overture = function(){

		if(this.mood == drama.BAD_MOOD){

			alert('crying');

		}else if(this.mood == drama.BETTER_MOOD){

			alert('laughing');

		}else{

			alert('stupid')
		}

	}

	drama.prototype.get = function(prop){

		return this.hasOwnProperty(prop) ? this[prop]:null;

	}


var SharksDrama = new drama({
		title : '情深深雨蒙蒙',
		author : '琼瑶',
		actor : '赵薇',
		mood : drama.BETTER_MOOD
})



document.body.appendChild( function(){

	var btn = document.createElement('button'),
		btn2 = document.createElement('button'),
		fragment = document.createDocumentFragment();

		btn.innerText = '点我查看这个剧本的信息';
		btn2.innerText = 'Start it!';

		fragment.appendChild(btn);
		fragment.appendChild(btn2);


			btn.addEventListener('click',function(){

					var informations = '电影名:' + SharksDrama.get('title') + '\n' +
									   '导演:' + SharksDrama.get('author') + '\n' +
									   '演员:'  + SharksDrama.get('actor') + '\n' +
									   '心情:' + ( SharksDrama.get('mood') == drama.BAD_MOOD ? ':(' : ':)' ) + '\n';
						if( confirm(informations + '确定要进去看吗￥50/人???') ) {

								btn2.click();

						}else{
							alert('Bye-bye');
						}
			})

			btn2.addEventListener('click',function(e){

				SharksDrama.overture();

			})


		return fragment;



}() )












return;
			var butt = document.getElementsByTagName('button');


				butt = Array.prototype.slice.call(butt)

				

				for(var i = 0 , l = butt.length;i<l;i++){

							butt[i].addEventListener('click', (function(x){


								return function(){

									alert(x);
								}

							})(i) )
					
				}

		
    }



   </script>
	
</body>
</html>